{"remainingRequest":"C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\LuanVan\\admin\\src\\pages\\Users\\Nhanvien.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\LuanVan\\admin\\src\\pages\\Users\\Nhanvien.vue","mtime":1656966701768},{"path":"C:\\xampp\\htdocs\\LuanVan\\admin\\.babelrc","mtime":1607335907000},{"path":"C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\LuanVan\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/xampp/htdocs/LuanVan/admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Paginate from \"vuejs-paginate\";\nimport axios from \"axios\";\nimport LTable from \"src/components/Table.vue\";\nimport Card from \"src/components/Cards/Card.vue\";\nexport default {\n  components: {\n    LTable: LTable,\n    Card: Card,\n    Paginate: Paginate\n  },\n  data: function data() {\n    return {\n      data: [],\n      users: [],\n      pageOfitems: []\n    };\n  },\n  mounted: function mounted() {\n    this.listNV();\n  },\n  methods: {\n    onChangePage: function onChangePage(pageOfitems) {\n      this.pageOfitems = pageOfitems;\n    },\n    listNV: function () {\n      var _listNV = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var token;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                token = localStorage.token;\n                _context.next = 3;\n                return axios.get(\"http://localhost:3000/admin/get-all-adm\", {\n                  headers: {\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    // \"Content-type\": \"Application/json\",\n                    \"Authorization\": \"Bearer \".concat(token)\n                  }\n                });\n\n              case 3:\n                this.data = _context.sent;\n                this.users = this.data.data;\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function listNV() {\n        return _listNV.apply(this, arguments);\n      }\n\n      return listNV;\n    }(),\n    deleteNV: function () {\n      var _deleteNV = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(ID) {\n        var text, token, admin, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                text = \"BẠN CÓ MUỐN XÓA NHÂN VIÊN NÀY\";\n\n                if (!(confirm(text) == true)) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                token = localStorage.token;\n                _context2.next = 5;\n                return axios.get(\"http://localhost:3000/admin/find-adm-id/\".concat(ID), {\n                  headers: {\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    // \"Content-type\": \"Application/json\",\n                    \"Authorization\": \"Bearer \".concat(token)\n                  }\n                });\n\n              case 5:\n                admin = _context2.sent;\n\n                if (!(admin.data[0].EMAIL === localStorage.admin)) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                alert(\"ĐANG SỬ DỤNG KHÔNG THỂ XÓA\");\n                _context2.next = 15;\n                break;\n\n              case 10:\n                _context2.next = 12;\n                return axios.delete(\"http://localhost:3000/admin/remove-adm/\".concat(ID), {\n                  headers: {\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    // \"Content-type\": \"Application/json\",\n                    \"Authorization\": \"Bearer \".concat(token)\n                  }\n                });\n\n              case 12:\n                result = _context2.sent;\n                alert(result.data.message);\n                window.location.reload();\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function deleteNV(_x) {\n        return _deleteNV.apply(this, arguments);\n      }\n\n      return deleteNV;\n    }(),\n    activeNV: function () {\n      var _activeNV = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(ID) {\n        var text, token, result;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                text = \"BẠN CÓ MUỐN KÍCH HOẠT NHÂN VIÊN NÀY\";\n\n                if (!(confirm(text) == true)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                token = localStorage.token;\n                _context3.next = 5;\n                return axios.delete(\"http://localhost:3000/admin/active-adm/\".concat(ID), {\n                  headers: {\n                    \"Access-Control-Allow-Origin\": \"*\",\n                    // \"Content-type\": \"Application/json\",\n                    \"Authorization\": \"Bearer \".concat(token)\n                  }\n                });\n\n              case 5:\n                result = _context3.sent;\n                alert(result.data.message);\n                window.location.reload();\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function activeNV(_x2) {\n        return _activeNV.apply(this, arguments);\n      }\n\n      return activeNV;\n    }()\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;EACAA;IACAC,cADA;IAEAC,UAFA;IAGAC;EAHA,CADA;EAMAC,IANA,kBAMA;IACA;MACAA,QADA;MAEAC,SAFA;MAGAC;IAHA;EAKA,CAZA;EAaAC,OAbA,qBAaA;IACA;EACA,CAfA;EAiBAC;IACAC,YADA,wBACAH,WADA,EACA;MACA;IACA,CAHA;IAIAI,MAJA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAKAC,KALA,GAKAC,kBALA;gBAAA;gBAAA,OAMAC;kBACAC;oBACA,kCADA;oBAEA;oBACA;kBAHA;gBADA,EANA;;cAAA;gBAMA,SANA;gBAaA;;cAbA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;IAgBAC,QAhBA;MAAA,0FAgBAC,EAhBA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAiBAC,IAjBA,GAiBA,+BAjBA;;gBAAA,MAmBAC,qBAnBA;kBAAA;kBAAA;gBAAA;;gBAqBAP,KArBA,GAqBAC,kBArBA;gBAAA;gBAAA,OAuBAC,iEACA;kBACAC;oBACA,kCADA;oBAEA;oBACA;kBAHA;gBADA,CADA,CAvBA;;cAAA;gBAuBAK,KAvBA;;gBAAA,MAgCAA,0CAhCA;kBAAA;kBAAA;gBAAA;;gBAiCAC;gBAjCA;gBAAA;;cAAA;gBAAA;gBAAA,OAoCAP;kBACAC;oBACA,kCADA;oBAEA;oBACA;kBAHA;gBADA,EApCA;;cAAA;gBAoCAO,MApCA;gBA2CAD;gBACAE;;cA5CA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;IAkDAC,QAlDA;MAAA,0FAkDAP,EAlDA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAmDAC,IAnDA,GAmDA,qCAnDA;;gBAAA,MAoDAC,qBApDA;kBAAA;kBAAA;gBAAA;;gBAqDAP,KArDA,GAqDAC,kBArDA;gBAAA;gBAAA,OAsDAC;kBACAC;oBACA,kCADA;oBAEA;oBACA;kBAHA;gBADA,EAtDA;;cAAA;gBAsDAO,MAtDA;gBA6DAD;gBACAE;;cA9DA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;EAAA;AAjBA","names":["components","LTable","Card","Paginate","data","users","pageOfitems","mounted","methods","onChangePage","listNV","token","localStorage","axios","headers","deleteNV","ID","text","confirm","admin","alert","result","window","activeNV"],"sourceRoot":"src/pages/Users","sources":["Nhanvien.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <card class=\"strpied-tabled-with-hover\" body-classes=\"table-full-width table-responsive\">\r\n            <template slot=\"header\">\r\n              <h5 class=\"card-title\" style=\"font-weight: bold\">\r\n                Danh sách nhân viên\r\n              </h5>\r\n            </template>\r\n\r\n            <div style=\"text-align: left\">\r\n              <router-link to=\"/quanlyuser/themnv\">\r\n                <button data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\"\r\n                  class=\"btn btn-primary btn-fill float-right\">\r\n                  Nhân viên mới\r\n                </button>\r\n              </router-link>\r\n            </div>\r\n            <div></div>\r\n            <table class=\"table table-striped\">\r\n              <thead>\r\n                <tr>\r\n                  <th>STT</th>\r\n                  <th>Email</th>\r\n                  <th>Họ tên</th>\r\n                  <th>SĐT</th>\r\n                  <th>Địa chỉ</th>\r\n                  <th>Giới tính</th>\r\n                  <th>Trạng thái</th>\r\n                  <th></th>\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"(use, index) in pageOfitems\" :key=\"index\">\r\n                  <td>{{ index + 1 }}</td>\r\n                  <td>{{ use.EMAIL }}</td>\r\n                  <td>{{ use.TEN }}</td>\r\n                  <td>{{ use.SODIENTHOAI }}</td>\r\n                  <td>{{ use.DIACHI }}</td>\r\n                  <template v-if=\"use.GIOITINH == 0\">\r\n                    <td>Nam</td>\r\n                  </template>\r\n                  <template v-else>\r\n                    <td>Nữ</td>\r\n                  </template>\r\n                  <template v-if=\"use.TRANGTHAI == 0\">\r\n                    <td>Hoạt động</td>\r\n                  </template>\r\n                  <template v-else>\r\n                    <td>Không hoạt động</td>\r\n                  </template>\r\n                  <td>\r\n                    <router-link :to=\"`/quanlyuser/${use.ID}/chinhsuaNV`\">\r\n                      <button type=\"button\" class=\"btn btn-primary btn-fill float-righ\">\r\n                        Sửa\r\n                      </button>\r\n                    </router-link>\r\n                    &nbsp;\r\n                    <template v-if=\"use.TRANGTHAI == 0\">\r\n                      <button @click.prevent=\"deleteNV(use.ID)\" type=\"button\"\r\n                        class=\"btn btn-danger btn-fill float-righ\">\r\n                        Xóa\r\n                      </button>\r\n                      &nbsp;\r\n                    </template>\r\n                    <template v-else>\r\n                      <button @click.prevent=\"activeNV(use.ID)\" type=\"button\"\r\n                        class=\"btn btn-success btn-fill float-righ\">\r\n                        Kích hoạt\r\n                      </button>\r\n                    </template>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            <div style=\"text-align: center\">\r\n              <jw-pagination :pageSize=\"10\" :items=\"users\" @changePage=\"onChangePage\">\r\n              </jw-pagination>\r\n            </div>\r\n          </card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Paginate from \"vuejs-paginate\"\r\nimport axios from \"axios\";\r\nimport LTable from \"src/components/Table.vue\";\r\nimport Card from \"src/components/Cards/Card.vue\";\r\nexport default {\r\n  components: {\r\n    LTable,\r\n    Card,\r\n    Paginate,\r\n  },\r\n  data() {\r\n    return {\r\n      data: [],\r\n      users: [],\r\n      pageOfitems: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.listNV();\r\n  },\r\n\r\n  methods: {\r\n    onChangePage(pageOfitems) {\r\n      this.pageOfitems = pageOfitems;\r\n    },\r\n    async listNV() {\r\n      const token = localStorage.token;\r\n      this.data = await axios.get(`http://localhost:3000/admin/get-all-adm`, {\r\n        headers: {\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n          // \"Content-type\": \"Application/json\",\r\n          \"Authorization\": `Bearer ${token}`\r\n        }\r\n      });\r\n      this.users = this.data.data;\r\n    },\r\n\r\n    async deleteNV(ID) {\r\n      let text = \"BẠN CÓ MUỐN XÓA NHÂN VIÊN NÀY\";\r\n\r\n      if (confirm(text) == true) {\r\n\r\n        const token = localStorage.token;\r\n\r\n        const admin = await axios.get(`http://localhost:3000/admin/find-adm-id/${ID}`,\r\n          {\r\n            headers: {\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n              // \"Content-type\": \"Application/json\",\r\n              \"Authorization\": `Bearer ${token}`\r\n            }\r\n          });\r\n\r\n        if (admin.data[0].EMAIL === localStorage.admin) {\r\n          alert(\"ĐANG SỬ DỤNG KHÔNG THỂ XÓA\");\r\n        }\r\n        else {\r\n          const result = await axios.delete(`http://localhost:3000/admin/remove-adm/${ID}`, {\r\n            headers: {\r\n              \"Access-Control-Allow-Origin\": \"*\",\r\n              // \"Content-type\": \"Application/json\",\r\n              \"Authorization\": `Bearer ${token}`\r\n            }\r\n          });\r\n          alert(result.data.message);\r\n          window.location.reload();\r\n        }\r\n\r\n      }\r\n    },\r\n\r\n    async activeNV(ID) {\r\n      let text = \"BẠN CÓ MUỐN KÍCH HOẠT NHÂN VIÊN NÀY\";\r\n      if (confirm(text) == true) {\r\n        const token = localStorage.token;\r\n        const result = await axios.delete(`http://localhost:3000/admin/active-adm/${ID}`, {\r\n          headers: {\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n            // \"Content-type\": \"Application/json\",\r\n            \"Authorization\": `Bearer ${token}`\r\n          }\r\n        });\r\n        alert(result.data.message);\r\n        window.location.reload();\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n</style>\r\n"]}]}